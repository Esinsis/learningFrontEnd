<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script src="myModule.js" ></script>
    <script src="myModule2.js" ></script>

    <script>
        var mm = myModule();
        mm.doSomething();
        mm.doOtherThing();

        myModule2.doSomething();
        myModule2.doOtherThing();
    </script>
</head>
<body>

<script>
    /**
     * 闭包：
     *    当一个嵌套的内部(子)函数引用了嵌套的外部(父)函数的变量时，就产生了闭包
     *
     *    1. 闭包是嵌套的内部函数
     *    2. 包含被引用的对象
     *
     *  常见的闭包
     *    1. 将函数作为另外一个函数的返回值
     *    2. 将函数作为实参传递给另一个函数调用
     *
     *  作用：
     *    1. 使函数内部的变量在函数执行完后，仍然存活在内存中（延长了局部变量的生命周期）
     *    2. 让函数外部可以操作到函数内部的数据（变量/函数）
     */

    // 将函数作为另外一个函数的返回值
    function fun1 (){
        var a = 1;
        function fun2(){
            a++;
            console.log(a);
            return a;
        }

        return fun2;
    }

    var f = fun1();
    var f2 = f();
    console.log(f2);

    // 将函数作为实参传递给另一个函数调用
    function fun3(time, msg){
        setTimeout(function (){
            console.log(msg);
        }, 2000);
    }

</script>
</body>
</html>